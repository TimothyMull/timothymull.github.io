= EtherChannel Lab Introduction

This lab is taken from the CCIE Enterprise Infrastructure Foundation, 2nd Edition book by Narbik Kocharians. All credit is given to him and generally the following explanations in this lab guide.
His companion/walkthrough article to go alongside the Cisco Press book is quite detailed and provides detailed insight into certain design choices and how the protocols operate.
This lab guide is mainly a regurgitation of the steps I followed and what I have learned from the reading and configuration. This is in no way my own work. 

== What is EtherChannel

EtherChannel is a Cisco proprietary technology designed to negotiate the creation/encapsulation of LAGs between switches using PAgP or LACP. This enables switches to load-balance traffic as well
as remove any blocking links created by STP. When both interfaces (called a port-channel on the local switch) are bundled into a channel-group (the actual grouping of both port-channels), they
appear as a single logical interface on each switch to STP. This also makes configuration of the port-channel and channel-group easier on the network engineer. For a in-depth look into EtherChannel
please visit my other article here <add hyperlink>.

Now lets dive into the lab

== Topology

The following is a look at the topology that will be used for this lab. I am using Cisco Modeling Labs Free to complete this lab.

ifdef::env-github[]
++++
<p align="center">
  <img width="800" height="1000" src="Pictures/LabTopology.jpg">
</p>
<h4 align="center">Figure 1. EtherChannel EIF Lab Toplogy</h4>
++++
endif::[]

ifndef::env-github[]
[]
image::Pictures/LabTopology.jpg[align=center]
endif::[]

=== Step 1: Shut down all ports on all switches and configure the VTP domain "TST"

First, by shutting down all ports this limits the risk of a "VTP Bomb". VTP works by synchronizing the VTP server's VLAN DB to all VTP Client switches. All switches must have the same VTP domain to operate and sync their VLAN DB's together.
However, the critical feature of VTP to enable all switches to have the same VLAN DB is the revision number of the server. The higher the revision number the more "accurate" that VLAN DB is or supposedly is.
One key thing to remeber is that if you introduce an old switch into the network and configure the same VTP domain and it is configured as a server, it may have a higher revision number. THis can cause this old switch
to replace all the other switch's VLAN DB's with incorrect VLAN information. This could destroy network connectivity and result in very angry end users all in one fell swoop. 

To shut down all ports you can use the interface range command to configure multiple interfaces at the same time. For example on SW1 the command would be:

* `SW1(config)#int range e0/0-3`

ifdef::env-github[]
++++
<p align="center">
  <img width="800" height="1000" src="Pictures/1IntRange.jpg">
</p>
++++
endif::[]

ifndef::env-github[]
[]
image::Pictures/1IntRange.jpg[align=center]
endif::[]

* `SW1(config-if-range)#shut`

All VTP domains must match for the VLAN DB to be propogated from the server to the clients. The command would be:

* `SW1(config)#vtp domain TST`

This should be done on all switches.

=== Step 2: Configure e0/3 and e0/2 between SW2 and SW3 as trunk links using an industry standard protocol.  SW2 ports should be configured to only respond to PAgP packets and never start the negotiation process.

As mentioned when not using EtherChannel to bundle links together STP will block links between switches that are capable of forming a loop. In the case of two links between switches, one interface will be blocking
essentially halving the bandwidth. Configuring EtherChannel will allow STP to view both the links as a single physical link and not block one of the links. By bundling these links it also enables the switch to
load balance traffic across them. This increases the available bandwidth when multiple independant sessions are communicating between the switches. 






